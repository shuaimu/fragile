// Minimal cstdint stub for fragile parsing
// This provides basic integer types when system headers don't work with libclang

#ifndef _FRAGILE_CSTDINT_
#define _FRAGILE_CSTDINT_

// Include commonly needed headers
#include "endian.h"  // Byte order macros (be16toh, htobe16, etc.)
#include "cctype"    // Character functions (tolower, toupper, etc.)

// nullptr_t needs to be defined before other types
namespace std {
    using nullptr_t = decltype(nullptr);
}
using nullptr_t = std::nullptr_t;

namespace std {
    using int8_t = signed char;
    using int16_t = short;
    using int32_t = int;
    // On x86_64 Linux, int64_t is 'long', not 'long long' (both are 64-bit but different types)
    using int64_t = long;

    using uint8_t = unsigned char;
    using uint16_t = unsigned short;
    using uint32_t = unsigned int;
    // On x86_64 Linux, uint64_t is 'unsigned long', not 'unsigned long long'
    using uint64_t = unsigned long;

    using size_t = unsigned long;
    using ssize_t = long;  // POSIX signed size type
    using ptrdiff_t = long;
    using intptr_t = long;
    using uintptr_t = unsigned long;

    using int_fast8_t = int8_t;
    using int_fast16_t = int16_t;
    using int_fast32_t = int32_t;
    using int_fast64_t = int64_t;

    using uint_fast8_t = uint8_t;
    using uint_fast16_t = uint16_t;
    using uint_fast32_t = uint32_t;
    using uint_fast64_t = uint64_t;

    // Minimum-width types
    using int_least8_t = int8_t;
    using int_least16_t = int16_t;
    using int_least32_t = int32_t;
    using int_least64_t = int64_t;

    using uint_least8_t = uint8_t;
    using uint_least16_t = uint16_t;
    using uint_least32_t = uint32_t;
    using uint_least64_t = uint64_t;

    // Greatest-width integer types
    using intmax_t = long long;
    using uintmax_t = unsigned long long;
}

// Also define in global namespace (C compatibility)
using int8_t = std::int8_t;
using int16_t = std::int16_t;
using int32_t = std::int32_t;
using int64_t = std::int64_t;
using uint8_t = std::uint8_t;
using uint16_t = std::uint16_t;
using uint32_t = std::uint32_t;
using uint64_t = std::uint64_t;
using size_t = std::size_t;
using ssize_t = std::ssize_t;
using ptrdiff_t = std::ptrdiff_t;
using intptr_t = std::intptr_t;
using uintptr_t = std::uintptr_t;
using intmax_t = std::intmax_t;
using uintmax_t = std::uintmax_t;

// Integer limits (from <climits> / <limits.h>)
#define INT8_MIN    (-128)
#define INT8_MAX    127
#define UINT8_MAX   255

#define INT16_MIN   (-32768)
#define INT16_MAX   32767
#define UINT16_MAX  65535

#define INT32_MIN   (-2147483647 - 1)
#define INT32_MAX   2147483647
#define UINT32_MAX  4294967295U

#define INT64_MIN   (-9223372036854775807LL - 1)
#define INT64_MAX   9223372036854775807LL
#define UINT64_MAX  18446744073709551615ULL

#define INTPTR_MIN  INT64_MIN
#define INTPTR_MAX  INT64_MAX
#define UINTPTR_MAX UINT64_MAX

#define SIZE_MAX    UINT64_MAX
#define PTRDIFF_MIN INT64_MIN
#define PTRDIFF_MAX INT64_MAX

#define INTMAX_MIN  (-9223372036854775807LL - 1)
#define INTMAX_MAX  9223372036854775807LL
#define UINTMAX_MAX 18446744073709551615ULL

#endif // _FRAGILE_CSTDINT_
