// Minimal sstream stub for fragile parsing
#ifndef _FRAGILE_SSTREAM_
#define _FRAGILE_SSTREAM_

#include "iostream"  // For ios_base, streamsize, etc.
#include "string"

namespace std {

// Basic streambuf stub
template<typename CharT, typename Traits = char_traits<CharT>>
class basic_streambuf {
public:
    virtual ~basic_streambuf() = default;
};

// Note: streamsize, ios_base, and manipulators (_Setprecision, _Setw, _Setfill)
// are defined in iostream which we include above.

// Stream manipulator functions (use ios_base from iostream)
inline ios_base& fixed(ios_base& str) { str.setf(ios_base::fixed, ios_base::floatfield); return str; }
inline ios_base& scientific(ios_base& str) { str.setf(ios_base::scientific, ios_base::floatfield); return str; }
inline ios_base& hex(ios_base& str) { str.setf(ios_base::hex, ios_base::basefield); return str; }
inline ios_base& dec(ios_base& str) { str.setf(ios_base::dec, ios_base::basefield); return str; }
inline ios_base& oct(ios_base& str) { str.setf(ios_base::oct, ios_base::basefield); return str; }
inline ios_base& left(ios_base& str) { str.setf(ios_base::left, ios_base::adjustfield); return str; }
inline ios_base& right(ios_base& str) { str.setf(ios_base::right, ios_base::adjustfield); return str; }
inline ios_base& boolalpha(ios_base& str) { str.setf(ios_base::boolalpha); return str; }
inline ios_base& noboolalpha(ios_base& str) { str.unsetf(ios_base::boolalpha); return str; }
inline ios_base& showbase(ios_base& str) { str.setf(ios_base::showbase); return str; }
inline ios_base& noshowbase(ios_base& str) { str.unsetf(ios_base::showbase); return str; }
inline ios_base& showpoint(ios_base& str) { str.setf(ios_base::showpoint); return str; }
inline ios_base& noshowpoint(ios_base& str) { str.unsetf(ios_base::showpoint); return str; }

// Basic stringstream - inherits from basic_iostream
template<typename CharT, typename Traits = char_traits<CharT>, typename Allocator = void>
class basic_stringstream : public basic_iostream<CharT, Traits> {
public:
    using string_type = basic_string<CharT>;

    basic_stringstream() = default;
    explicit basic_stringstream(const string_type& str) { (void)str; }

    string_type str() const { return string_type(); }
    void str(const string_type& s) { (void)s; }

    basic_stringstream& operator<<(const char* s) { (void)s; return *this; }
    basic_stringstream& operator<<(const string_type& s) { (void)s; return *this; }
    basic_stringstream& operator<<(int n) { (void)n; return *this; }
    basic_stringstream& operator<<(long n) { (void)n; return *this; }
    basic_stringstream& operator<<(long long n) { (void)n; return *this; }
    basic_stringstream& operator<<(unsigned int n) { (void)n; return *this; }
    basic_stringstream& operator<<(unsigned long n) { (void)n; return *this; }
    basic_stringstream& operator<<(unsigned long long n) { (void)n; return *this; }
    basic_stringstream& operator<<(double n) { (void)n; return *this; }
    basic_stringstream& operator<<(float n) { (void)n; return *this; }
    basic_stringstream& operator<<(bool b) { (void)b; return *this; }
    basic_stringstream& operator<<(void* p) { (void)p; return *this; }
    basic_stringstream& operator<<(char c) { (void)c; return *this; }

    // Manipulator support
    basic_stringstream& operator<<(ios_base& (*pf)(ios_base&)) { pf(*this); return *this; }
    basic_stringstream& operator<<(_Setprecision sp) { this->precision(sp.n); return *this; }
    basic_stringstream& operator<<(_Setw sw) { this->width(sw.n); return *this; }
    basic_stringstream& operator<<(_Setfill sf) { (void)sf; return *this; }

    // Input operators
    basic_stringstream& operator>>(int& n) { (void)n; return *this; }
    basic_stringstream& operator>>(unsigned int& n) { (void)n; return *this; }
    basic_stringstream& operator>>(long& n) { (void)n; return *this; }
    basic_stringstream& operator>>(unsigned long& n) { (void)n; return *this; }
    basic_stringstream& operator>>(long long& n) { (void)n; return *this; }
    basic_stringstream& operator>>(unsigned long long& n) { (void)n; return *this; }
    basic_stringstream& operator>>(float& n) { (void)n; return *this; }
    basic_stringstream& operator>>(double& n) { (void)n; return *this; }
    basic_stringstream& operator>>(string_type& s) { (void)s; return *this; }
};

template<typename CharT, typename Traits = char_traits<CharT>, typename Allocator = void>
class basic_ostringstream : public basic_ostream<CharT, Traits> {
public:
    using string_type = basic_string<CharT>;

    basic_ostringstream() = default;
    explicit basic_ostringstream(const string_type& s) { (void)s; }

    string_type str() const { return string_type(); }
    void str(const string_type& s) { (void)s; }

    // Override operators to return correct type
    basic_ostringstream& operator<<(const char* s) { (void)s; return *this; }
    basic_ostringstream& operator<<(const string_type& s) { (void)s; return *this; }
    basic_ostringstream& operator<<(int n) { (void)n; return *this; }
    basic_ostringstream& operator<<(long n) { (void)n; return *this; }
    basic_ostringstream& operator<<(long long n) { (void)n; return *this; }
    basic_ostringstream& operator<<(unsigned int n) { (void)n; return *this; }
    basic_ostringstream& operator<<(unsigned long n) { (void)n; return *this; }
    basic_ostringstream& operator<<(unsigned long long n) { (void)n; return *this; }
    basic_ostringstream& operator<<(double n) { (void)n; return *this; }
    basic_ostringstream& operator<<(float n) { (void)n; return *this; }
    basic_ostringstream& operator<<(bool b) { (void)b; return *this; }
    basic_ostringstream& operator<<(void* p) { (void)p; return *this; }
    basic_ostringstream& operator<<(char c) { (void)c; return *this; }
    basic_ostringstream& operator<<(ios_base& (*pf)(ios_base&)) { pf(*this); return *this; }
    basic_ostringstream& operator<<(_Setprecision sp) { this->precision(sp.n); return *this; }
    basic_ostringstream& operator<<(_Setw sw) { this->width(sw.n); return *this; }
    basic_ostringstream& operator<<(_Setfill sf) { (void)sf; return *this; }
};

template<typename CharT, typename Traits = char_traits<CharT>, typename Allocator = void>
class basic_istringstream : public basic_istream<CharT, Traits> {
public:
    using string_type = basic_string<CharT>;

    basic_istringstream() = default;
    explicit basic_istringstream(const string_type& s) { (void)s; }

    string_type str() const { return string_type(); }
    void str(const string_type& s) { (void)s; }

    // Input operators
    basic_istringstream& operator>>(int& n) { (void)n; return *this; }
    basic_istringstream& operator>>(unsigned int& n) { (void)n; return *this; }
    basic_istringstream& operator>>(long& n) { (void)n; return *this; }
    basic_istringstream& operator>>(unsigned long& n) { (void)n; return *this; }
    basic_istringstream& operator>>(long long& n) { (void)n; return *this; }
    basic_istringstream& operator>>(unsigned long long& n) { (void)n; return *this; }
    basic_istringstream& operator>>(float& n) { (void)n; return *this; }
    basic_istringstream& operator>>(double& n) { (void)n; return *this; }
    basic_istringstream& operator>>(string_type& s) { (void)s; return *this; }
};

using stringstream = basic_stringstream<char>;
using ostringstream = basic_ostringstream<char>;
using istringstream = basic_istringstream<char>;

using wstringstream = basic_stringstream<wchar_t>;
using wostringstream = basic_ostringstream<wchar_t>;
using wistringstream = basic_istringstream<wchar_t>;

} // namespace std

#endif // _FRAGILE_SSTREAM_
